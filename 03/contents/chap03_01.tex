\chapter{温度や\ruby{湿度}{しつ|ど}、明るさを\ruby{測}{はか}ってみよう}
\section{はじめに}
\subsection{この章で学ぶこと}
この章では以下のことを学びます。

\begin{itemize}
  \item コンピュータをコマンドを使って動かす
  \item ファイルとディレクトリを文字で指定する
  \item センサーボードをプログラムで動かす
  \begin{itemize}
    \item LEDの点灯・消灯
    \item 温湿度\ruby{気圧}{き|あつ}センサーの値を\ruby{読}{よ}む
    \item ボタンを上手に使う
  \end{itemize}
\end{itemize}

まずコンピュータをコマンドで動かす方法を学びます。
マウスではなく、コマンドでコンピュータを\ruby{操作}{そう|さ}することは、とても重要です。
コマンドを使うと、コンピュータがするべき操作を文字で記録したり、
\ruby{離}{はな}れたコンピュータを\ruby{簡単}{かん|たん}に操作できるようになります。
また、コマンドでファイルを\ruby{扱}{あつか}うために、ファイルが置いてある場所を\ruby{指示}{し|じ}する方法を学びます。
ターミナルを利用して、文字を使ってファイルの操作をできるようになりましょう。

次に、センサーボードをプログラムから動かす方法を学びます。
センサーボードに取り付けてあるLEDを点灯・消灯させたり、
温湿度気圧センサーの\ruby{情報}{じょう|ほう}を読み取ったり、ボタンを上手に使ったりして、
センサーボードをプログラムから動かすことができるようになりましょう。

\subsection{教材を自分のフォルダに置こう}
まずは、今回利用する教材をコピーしましょう。
第1回, 第2回と同じように、\nobreak/usr/local/share/ome という場所にあるフォルダ 03 をコピーして、/home/ユーザー名 に\ruby{貼}{は}り付けてください。

やり方を\ruby{忘}{わす}れてしまった人は、「第1回 4.1 例題1-18 教材をじぶんのフォルダに置こう」 を参考にしてみてください。

\section{ターミナルを使ってみよう}
\subsection{コマンドについて知ろう}

ターミナルではコマンドを使ってコンピュータとやりとりをします。
コマンドとはコンピュータにあたえる命令のことです。
コマンドは下のようなかたちで書きます。

\begin{description}
\item[コマンド\textvisiblespace オプション\textvisiblespace \ruby{引数}{ひき|すう}１\textvisiblespace 
\ruby{引数}{ひき|すう}２]\mbox{}\\
コマンドは動作、引数は操作の\ruby{対象}{たい|しょう}です。
 コマンドの最後にEnterキー（エンターキー）を\ruby{押}{お}して、
 コンピュータにコマンドを送ります。
 EnterキーはReturn（リターン）キーと\ruby{呼}{よ}ぶこともあります。
\end{description}

使うときは次のことに気を付けましょう。
\begin{itemize}
\item \emph{半角英数字でかくこと}
\item \emph{間にスペース（空白）をいれること}
\end{itemize}

今回はわかりやすいように、スペースを「\textvisiblespace 」のように示しました。
次回からはこのようにしません。どこにスペースを入れるべきかをしっかり覚えましょう。

みなさんが使うラズパイでは英語が使われています。最初から入っているフォルダの名前も英語になっています。
読み方を知りたい人は\pageref{英語と日本語の対応表}ページの英語と日本語の\ruby{対応表}{たい|おう|ひょう}を見てみましょう。

\subsection{自分がどのディレクトリにいるか知ろう}
ディレクトリとは、第１回で習ったフォルダと\ruby{基本的}{き|ほん|てき}に同じものです。
マウスで操作する場合はフォルダ、コマンドで操作する場合はディレクトリと呼ぶことが多いです。

\begin{description}
\item[\texttt{pwd}]\mbox{}\\
 カレントディレクトリ（自分が今いるディレクトリ）が表示されます。
\end{description}

\begin{lstlisting}[caption=pwdコマンドの例,label=pwdtest]
<#green#pi@raspberrypi#>:<#blue#~ $#> pwd
/home/pi   <-- カレントディレクトリが表示されます
<#green#pi@raspberrypi#>:<#blue#~ $#>
\end{lstlisting}

\subsection{ディレクトリの中を見てみよう}
\begin{description}
\item[\texttt{ls}\textvisiblespace \texttt{-F}\textvisiblespace ディレクトリ]\mbox{}\\
ディレクトリの中のファイルやディレクトリが表示されます。
ファイルはピンクの文字、ディレクトリは青い文字になっています。
Fは大文字なので注意してください。
\end{description}

%//terminal[lsF-test][ls -F コマンドの例]{
\begin{minipage}{\linewidth}
\begin{lstlisting}[caption=ls -F コマンドの例。ファイルやディレクトリが表示されます,label=lsFtest]
<#green#pi@raspberrypi#>:<#blue#~ $#> ls -F
<#blue#01  03         Desktop    Downloads  Pictures  Templates
02  Bookshelf  Documents  Music      Public    Videos#>
<#green#pi@raspberrypi#>:<#blue#~ $#>
\end{lstlisting}
\end{minipage}

\begin{itemize}
\item[<例>] ls\textvisiblespace -Fだけを入力するとカレントディレクトリの中を見ることができます。 
\item[<例>] Picturesというディレクトリの中を見たい場合は ls\textvisiblespace -F\textvisiblespace Pictures/と入力します。 
\end{itemize}

ディレクトリの中にあるファイルは人によってちがいます。
\begin{lstlisting}[caption=ls -F Pictures/コマンドの例,label=lsFPicttest]
<#green#pi@raspberrypi#>:<#blue#~ $#> ls -F Pictures
<#magenta#2019-07-08-145604_1366X768_scrot.png  2019-07-08-150326_1366X768_scrot.png  
2019-07-08-150313_1366X768_scrot.png  2019-07-08-150348_1366X768_scrot.png  
2019-07-08-150323_1366X768_scrot.png  2019-07-08-150356_1366X768_scrot.png  #>
<#green#pi@raspberrypi#>:<#blue#~ $#> 
\end{lstlisting}

\begin{tcolorbox}[title=\useOmetoi]
\begin{enumerate}
  \addquiz{\ruby{実際}{じっ|さい}にpwdを使って、カレントディレクトリが\ruby{表示}{ひょう|じ}されることを確かめましょう。
  表示されたカレントディレクトリを書いてください。}
\addquiz{\texttt{ls}\textvisiblespace \texttt{-F}と入力して出てきたファイルとディレクトリの名前を１つずつ書きましょう。Fは大文字です。}
\addquiz{\texttt{ls}\textvisiblespace \texttt{-F}\textvisiblespace Pictures/ と入力して出てきたファイルかディレクトリの名前を１つ書きましょう。}
\end{enumerate}
\end{tcolorbox}

\section{ファイルとディレクトリ}
\subsection{ファイル、ディレクトリってなんだろう？}
ファイルはコンピュータに\ruby{保存}{ほ|ぞん}されている文章、\ruby{画像}{が|ぞう}、音楽などのデータです。
多くの場合、人間はコンピュータにファイルを操作させることで仕事をします。
ファイルには「\ruby{拡張子}{かく|ちょう|し}」がついており、
そのファイルがどんな種類なのかを表します。
たとえば、画像ファイルを表す.jpgや、動画ファイルを表す.mp4、
テキストファイルを表す.txtなどがあります。

\begin{table}[H]
  \begin{center}
    \caption[tab:files]{ファイルの種類}
    \begin{tabular}{|c|c|c|} \hline
    \begin{minipage}{0.3\hsize}
      \begin{center}
        \includesvg[width=\linewidth]{images/chap03/oto.svg}
      \end{center}  
    \end{minipage} & 
    \begin{minipage}{0.3\hsize}
      \begin{center}
        \includesvg[width=\linewidth]{images/chap03/image.svg}
      \end{center}
    \end{minipage} &
    \begin{minipage}{0.3\hsize}
      \begin{center}
        \includesvg[width=\linewidth]{images/chap03/douga.svg}
      \end{center} 
    \end{minipage} \\ \hline
    oto.mp3 & gazou.jpg & douga.mp4 \\ \hline
  \end{tabular}
 \end{center}
\end{table}


ディレクトリとはファイルを分類・整理するためのもので、
いくつかのファイルを入れておくためのファイルです。
ファイルを紙だとしてディレクトリはバインダーだと思うとわかりやすいでしょう。

\begin{tcolorbox}[title=\useOmetoi]
\begin{enumerate}
\addquiz{ファイルとはなんでしょうか。}
\addquiz{ディレクトリとはなんでしょうか。}
\addex{どんな拡張子があるかインターネットで調べてみましょう。

\begin{table}[H]
  \centering
  \begin{tabular}{lrr} \toprule
番号 & 拡張子 & 表すもの \\ \midrule
\vspace{16mm}1. & .jpg & 画像 \\
\vspace{16mm}2. & .mp4 & 動画 \\
\vspace{16mm}3. & \hspace{10\zw} & \hspace{10\zw} \\
\vspace{16mm}4. & \hspace{10\zw} & \hspace{10\zw} \\
\vspace{16mm}5. & \hspace{10\zw} & \hspace{10\zw} \\ \bottomrule
\end{tabular}
\end{table}
例を見て、拡張子とその拡張子が何を表すか3つ書いてみましょう。\\
(ヒント: 教科書第1回 2.7 ブラウザでけんさくしよう を参考にしましょう。)
        }
\end{enumerate}
\end{tcolorbox}

\subsection{ディレクトリの関係}
いま注目しているディレクトリの中に入っているディレクトリを\emph{下のディレクトリ}、
いま注目しているディレクトリを中に持っているディレクトリを\emph{上のディレクトリ}と呼びます。

一番上のディレクトリは / スラッシュで書きます。その下にあるbin boot dev etcなどのディレクトリはコンピュータの\ruby{設定}{せっ|てい}ファイルを持っているので、\ruby{間違}{ま|ちが}った使い方をすると\ruby{壊}{こわ}れます。気を付けましょう。

ユーザが作業に使ってもよいディレクトリを\emph{ホームディレクトリ}と言います。
ユーザの作業はホームディレクトリの下で行います。
ホームディレクトリは、ラズベリーパイでは\emph{/home/あなたのユーザ名}です。
ホームディレクトリを示すために記号「\textasciitilde」（チルダ）を使うこともできます。

みなさんが今、作業に使っているディレクトリは\emph{カレントディレクトリ}と言います。
カレントディレクトリは./と書くことができます。
カレントディレクトリからひとつ上のディレクトリは../と書くことができます。
ディレクトリは/で区切ります。

ディレクトリの位置は\emph{一番上のディレクトリ（/）から見てどこにあるか(\ruby{絶対}{ぜっ|たい}パス)}、
または\emph{カレントディレクトリから見てどこにあるか(相対パス)}で決まります。
絶対パスの\ruby{特徴}{とく|ちょう}は\emph{パスの先頭に / がついています}。相対パスの特徴は\emph{パスの先頭に / がついていません}。

\textasciitilde (チルダ) から始まるディレクトリの位置は、\textasciitilde を
「/home/あなたのユーザ名」と置き\ruby{換}{か}えたものとして扱われます。

カレントディレクトリにあるディレクトリxxxの位置を指定する場合は、
xxx、xxx/、./xxx、./xxx/などと書きます。いろいろな指定の仕方があるのは面白いですね。

ホームディレクトリにあるファイルyyyの位置を指定する場合は、
\textasciitilde /yyy, または /home/あなたのユーザ名/yyy と書きます。ファイルの後ろにはスラッシュ記号(/)はつけません。

図\ref{fig:folder-path}にユーザー名が「pi」のときのフォルダとフォルダの関係をパスであらわしてあります。
パスとフォルダ間の関係を考えながら図を読みましょう。

\begin{figure}[H]
    \begin{minipage}{0.4\hsize}
        \includesvg[width=\hsize]{images/chap03/directory_arc.svg}
    \end{minipage}
    \begin{minipage}{0.6\hsize}
        \begin{itemize}
        \item /は一番上のディレクトリから見ると/
        \item /はカレントディレクトリが/のとき.
        \item /はカレントディレクトリがhomeのとき..
        \item /はカレントディレクトリがpiのとき../..
        \item homeは一番上のディレクトリから見ると/home
        \item homeはカレントディレクトリが/のとき./home
        \item homeはカレントディレクトリがhomeのとき.
        \item homeはカレントディレクトリがpiのとき..
        \item piは一番上のディレクトリから見ると/home/pi
        \item piはカレントディレクトリが/のとき./home/pi
        \item piはカレントディレクトリがhomeのとき./pi
        \item piはカレントディレクトリがpiのとき.
        \end{itemize}
    \end{minipage}
    \caption{フォルダ間の関係をパスで説明する}
    \label{fig:folder-path}
\end{figure}

\begin{tcolorbox}[title=\useOmetoi,breakable]
\begin{figure}[H]
 \centering
 \includesvg[width=0.6\linewidth]{images/chap03/ex3-2.svg}
\end{figure}
ユーザー名を「pi」としたときに以下の問題に答えてみましょう。
\begin{enumerate}
\addquiz{ホームディレクトリはどれでしょうか}
\addquiz{カレントディレクトリが/home/pi/Videoのとき、ひとつ上のディレクトリはどれでしょうか。}
\addquiz{カレントディレクトリが/home/piのとき、ひとつ下のディレクトリはどれでしょうか。４つあります。}
\addquiz{カレントディレクトリが/home/pi/Desktopのとき、ひとつ上のディレクトリはどれでしょうか。}
\addquiz{カレントディレクトリが\textasciitilde /Desktopのとき、ひとつ下のディレクトリはどれでしょうか。}
\end{enumerate}
\end{tcolorbox}

